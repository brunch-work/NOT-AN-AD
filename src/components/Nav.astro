---
import NotAnAdLogo from "../assets/images/svg/NOT_AN_AD_LOGO.svg";

const time = new Date().toLocaleTimeString("en-US", {
  hour: "numeric",
  minute: "2-digit",
  second: "2-digit",
  hour12: false,
  timeZone: "America/New_York", // Example IANA time zone name for UTC-5 during EST
});

const currentPath = Astro.url.pathname;
---

<nav class="nav grid">
  <div class="subgrid">
    <div class="logo">
      <NotAnAdLogo fill="currentColor" />
    </div>

    <div class="menu">
      <div class="menu__inner">
        <ul>
          <a href="/">
            <li>
              <span>
                {currentPath === "/" ? "[NOT AN AD]" : "NOT AN AD"}
              </span>
            </li>
          </a>
          <a href="/archive">
            <li>
              <span>
                {currentPath === "/archive" ? "[ARCHIVE]" : "ARCHIVE"}
              </span>
            </li>
          </a>
          <li id="about-button" class="link">
            <span id="about-link">ABOUT</span>
          </li>
        </ul>
        <ul id="about">
          <li>
            <span>ABOUT</span>
            <p>
              NOT AN AD is a social-media advertising agency based in New York
              City.
            </p>
          </li>
          <li>
            <span>MANIFESTO</span>
            <p>
              Traditional messaging strategies simply will not reach those born
              into an ad-saturated world. With our extensive experience in
              organic social content we will help create an online presence that
              cultivates a dedicated following for your brand.
            </p>
          </li>
          <li>
            <span>SERVICES</span>
            <p>
              social strategy, content production, high impact internet
              campaigns, media buy strategy, media production.
            </p>
          </li>
          <li>
            <span>INQUIRIES</span>
            <p>
              to discuss a potential project, please email use with a brief
              description, a timeline and a rough budget.
            </p>
            <a class="link-accent" href="mailto:hello@notanad.us"
              >hello@notanad.us</a
            >
          </li>
        </ul>
      </div>
    </div>

    <div class="datetime">
      <span id="current-time">{time} (UTC-5)</span>
    </div>
  </div>
</nav>

<script>
  function updateTime() {
    const timeElement = document.getElementById("current-time");
    if (timeElement) {
      const now = new Date();
      const timeString = now.toLocaleTimeString("en-US", {
        hour: "numeric",
        minute: "2-digit",
        second: "2-digit",
        hour12: false,
        timeZone: "America/New_York",
      });
      timeElement.textContent = `${timeString} (UTC-5)`;
    }
  }

  // Update immediately on load
  updateTime();

  // Update every second
  setInterval(updateTime, 1000);

  const aboutButton = document.getElementById("about-button");
  const aboutLink = document.getElementById("about-link");
  const about = document.getElementById("about");

  let aboutOpen = false;

  if (aboutButton && aboutLink) {
    aboutButton.addEventListener("click", () => {
      aboutOpen = !aboutOpen;
      aboutLink.textContent = aboutOpen ? "CLOSE" : "ABOUT";
      about.style.display = aboutOpen ? "flex" : "none";
    });
  }
</script>
